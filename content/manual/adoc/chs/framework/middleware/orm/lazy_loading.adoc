:sourcesdir: ../../../../../source

[[lazy_loading]]
===== 延迟加载

延迟加载（按需加载，也称懒加载）启用关联实体的延迟加载，即在第一次访问其属性时加载它们。

延迟加载会比<<eager_fetching,贪婪加载>>生成更多的数据库查询，但是这些查询会在时间维度上推迟。

* 例如，在延迟加载实体 A 的 N 个实例的列表的情况下，每个实例包含到实体 B 的实例的链接，将需要对 DB 进行 N+1 个请求，1 个请求用来加载 N 个 A，N 个请求用来为每个 A 加载 B。

* 在大多数情况下，最小化对数据库的请求数会使响应时间和数据库负担减少。平台使用<<views,视图>>的机制来实现这一目标。使用视图允许 ORM 仅为上述关联表的情况执行一次数据库请求。

延迟加载仅适用于<<entity_states,托管>>状态的实例，即在加载实例的事务中。

